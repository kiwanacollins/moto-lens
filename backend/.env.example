# MotoLens Backend Environment Variables
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# Server Configuration
PORT=3001
NODE_ENV=development

# Frontend URL (for CORS)
FRONTEND_URL=http://localhost:5173

# === DATABASE CONFIGURATION ===

# PostgreSQL Database URL
# Format: postgresql://username:password@hostname:port/database?schema=public
# Development: Local PostgreSQL instance
DATABASE_URL=postgresql://motolens:motolens_dev_password@localhost:5432/motolens_dev?schema=public

# Production: Use managed PostgreSQL service (AWS RDS, Heroku, Railway, etc.)
# DATABASE_URL=postgresql://user:password@host:5432/production_db?schema=public

# === JWT & AUTHENTICATION ===

# JWT Access Token Secret (Generate a strong random string)
# Generate with: openssl rand -base64 32
JWT_SECRET=your_super_secret_jwt_key_change_in_production_min_32_chars

# JWT Refresh Token Secret (Different from access token)
JWT_REFRESH_SECRET=your_super_secret_refresh_key_change_in_production_min_32_chars

# Token expiry times
JWT_ACCESS_TOKEN_EXPIRY=15m     # Access token expires in 15 minutes
JWT_REFRESH_TOKEN_EXPIRY=7d     # Refresh token expires in 7 days

# === EMAIL SERVICE ===

# Email provider configuration (using Nodemailer)
# Options: Gmail, SendGrid, AWS SES, Mailgun, etc.
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false              # true for 465, false for other ports
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-specific-password
EMAIL_FROM=MotoLens <noreply@motolens.com>

# SendGrid alternative (if using SendGrid instead)
# SENDGRID_API_KEY=your_sendgrid_api_key_here

# === SECURITY SETTINGS ===

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000     # 15 minutes in milliseconds
RATE_LIMIT_MAX_REQUESTS=100      # Max requests per window

# Session settings
SESSION_TIMEOUT_MINUTES=30       # Inactive session timeout
MAX_SESSIONS_PER_USER=5          # Maximum concurrent sessions per user

# Password policy
MIN_PASSWORD_LENGTH=8
REQUIRE_UPPERCASE=true
REQUIRE_LOWERCASE=true
REQUIRE_NUMBERS=true
REQUIRE_SPECIAL_CHARS=false

# === VIN DECODING SERVICES ===

# Zyla Labs VIN Decode API (Primary VIN API)
# Get your API key from: https://zylalabs.com/api-marketplace/data/vin+decode+api
# Comprehensive VIN decoding with good coverage
ZYLA_API_KEY=your_zyla_api_key_here

# NHTSA vPIC (Fallback VIN API) - 100% FREE, no API key needed
# This is the fallback VIN decoder, backed by US Department of Transportation
# Coverage: Excellent for all vehicles including German cars
# No configuration required!

# Vincario VIN Service (Optional European Fallback)
# Get your API key from: https://vindecoder.eu/api/
# Free tier: 10 requests/day | Paid: €29/month for 1,000 requests
# Only needed for enhanced European vehicle coverage
# Leave empty to use free NHTSA only
VINCARIO_API_KEY=your_vincario_api_key_here

# === AI & IMAGE SERVICES ===

# Google Gemini AI Studio API (AI text generation + vehicle enrichment)
# Get your API key from: https://aistudio.google.com/api-keys
GEMINI_API_KEY=your_gemini_api_key_here

# SerpApi (Web Image Search) - RECOMMENDED  
# Get your API key from: https://serpapi.com/dashboard
# Free tier: 1,000 searches/month
SERPAPI_KEY=your_serpapi_key_here

# Optional: Additional Image Search APIs
# Bing Image Search API (Microsoft Cognitive Services)
# Get your API key from: https://portal.azure.com
BING_IMAGE_SEARCH_KEY=your_bing_api_key_here

# Google Custom Search Engine (Limited: 100/day free)
# Get your API key from: https://console.cloud.google.com
GOOGLE_CUSTOM_SEARCH_KEY=your_google_cse_key_here
GOOGLE_CUSTOM_SEARCH_CX=your_search_engine_id_here

# === ARCHITECTURE NOTES ===
# VIN Decoding Strategy:
# 1. Zyla Labs (Primary) - Comprehensive VIN decoding
# 2. NHTSA vPIC (Fallback) - Free, government-backed, 99.9% uptime
# 3. Vincario (Fallback) - European specialist, paid only if needed
# 4. Consistent AI Enhancement - Cached results prevent conflicting specs
#
# Cost Structure:
# - Primary: Zyla Labs API
# - Free fallback: NHTSA handles failover requests ($0/month)
# - EU fallback: ~€29/month only if European coverage needed
